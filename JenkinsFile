pipeline {
    agent any
    environment {
      DIRECTORY_PATH = "/Users/mook/S777/T2/SIT753/jenkins/JenkinsFile"
      TESTING_ENVIRONMENT = "QA"
      PRODUCTION_ENVIRONMENT = "NATTAKAN"
    }
    stages {
        stage('Build') {
          steps {
            echo "fetching the source code from ${DIRECTORY_PATH}"
            echo "compile the code and generate any necessary artifacts"
          }
          post{
            success{
              mail to: "nattakan.o1998@gmail.com",
              subject: "Build Status Email",
              body: "Build was successful!"
            }
          }
        }
        stage('Unit and Integration Tests') {
          steps {
            echo "unit tests"
            echo "integration tests"
          }
        }
        stage('Code Analysis') {
          steps {
            echo "unit tests"
            echo "integration tests"
          }
        }
        stage('Security Scan') {
          steps {
            echo "unit tests"
            echo "integration tests"
          }
        }
        stage('Integration Tests on Staging') {
          steps {
            echo "checking the quality of the code"
          }
        }
        stage('Deploy') {
          steps {
            echo "deploy the application to ${TESTING_ENVIRONMENT}"
          }
        }
        stage('Approval') {
          steps {
            echo "approvaling"
            sleep 10
          }
        }
        stage('Deploy to Production') {
          steps {
            echo "deploying the code to ${PRODUCTION_ENVIRONMENT}"
          }
        }
    }
}